import{n as e,y as t}from"./lit-element-d78ce8b8.js";class n extends e{static get properties(){return{pub:{type:String},sub:{type:String},set:{type:String},get:{type:String}}}constructor(){super(),n.Server={server:"wss://mqtt1.webduino.io/mqtt",userName:"webduino",password:"webduino"}}async firstUpdated(){var e=this;if(n.mClient||(n.isConnect=!1,n.mClient=new webduino.module.mqttClient,await n.mClient.connect(n.Server),console.log("mqttClient connect ok"),n.isConnect=!0),e.pub){var t=e.get.split("."),i=t[0],s=t[1],r=document.getElementById(i);"on"==s&&"MWC-ICON-BUTTON-TOGGLE"==r.tagName?r.addEventListener("icon-button-toggle-change",(function(t){n.mClient.send({topic:e.pub,message:""+t.detail.isOn})})):"input"==s&&"MWC-SLIDER"==r.tagName?r.addEventListener("input",(function(t){n.mClient.send({topic:e.pub,message:""+parseInt(this.value)})})):"checked"==s&&"MWC-SWITCH"==r.tagName&&r.addEventListener("input",(function(t){n.mClient.send({topic:e.pub,message:""+(1!=this.checked)})}))}if(e.sub)var a=setInterval((async function(){n.isConnect&&(await n.mClient.onMessage(e.sub,(async t=>{var n=e.set.split(".");"true"==t&&(t=!0),"false"==t&&(t=!1);var i=n[0],s=n[1];document.getElementById(i)[s]=t})),clearInterval(a))}),100)}render(){return t`<div></div>`}}customElements.define("wa-mqtt",n);export{n as wa_mqtt};
